<!DOCTYPE html>
<html>
<head>
  <title>QR Attendance Scanner</title>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>
  <h2>üì∏ QR Attendance Scanner</h2>
  <div id="reader" style="width: 300px;"></div>
  <p id="status"></p>

  <script>
    const sheetWebhookURL = "https://script.google.com/macros/s/AKfycbzbdgtEjSDtc3SstJKi289qRr94What-aHKeaNURhn04aUngo_DQ28jCxSjQUZ_HCbEMg/exec"; // üëà Replace with your deployed Google Apps Script URL

    function sendToSheet(data) {
      fetch(sheetWebhookURL, {
        method: "POST",
        body: data,
        headers: {
          "Content-Type": "text/plain"
        }
      })
      .then(res => res.text())
      .then(msg => {
        document.getElementById("status").innerText = "‚úÖ Attendance logged";
      })
      .catch(err => {
        document.getElementById("status").innerText = "‚ùå Failed to log attendance";
      });
    }

    function onScanSuccess(decodedText, decodedResult) {
      sendToSheet(decodedText);
    }

    const html5QrCode = new Html5Qrcode("reader");
    html5QrCode.start(
      { facingMode: "environment" }, // use back camera
      {
        fps: 10,
        qrbox: 250
      },
      onScanSuccess
    );
  </script>
</body>
</html>
